{"meta":{"title":"PPuyan","subtitle":"","description":"","author":"ppuyan","url":"https://ppuyan.github.io","root":"/"},"posts":[{"tags":[{"name":"Substance Painter","slug":"Substance-Painter","permalink":"https://ppuyan.github.io/tags/Substance-Painter/"}],"title":"Substance Painter入门教程笔记：煤油灯","date":"2020/12/10","text":"前言​ 初次接触Substance Painter，主要为了熟悉SP界面和工作流程。本文并非教程，只是记录学习轨迹，所以开门见山地贴出教程地址，有兴趣可以前往学习。 教程地址： 官网：SUBSTANCE PAINTER 2018 初学者B站：Substance Painter 入门教程：煤油灯 正文快捷键视图旋转：alt+左键 视图缩放：alt+右键 视图平移：alt+中键 旋转环境光贴图：shift+右键 在模型上选择Texture set（材质）：ctrl+alt+右键 循环贴图显示模式：shift+B 返回材质模式：M 循环通道显示：C 笔刷大小：ctrl+右键左右移动 笔刷alpha硬度值：ctrl+右键上下移动 笔刷流量：ctrl+左键左右移动 阻止画刷叠加构建：A 旋转笔刷alpha贴图：ctrl+左键上下移动 画直线：左键+shift 直线按15°刻度吸附：shift+ctrl+左键 Stencil模板：s+右键缩放，s+左键旋转，s+中键移动 笔刷黑白切换：x 要点Texture set = material ID在SP中Texture set（纹理设置）是三维软件中设置的Material ID（材质ID） 导入外部贴图Shelf -> importing resources 为导入的资源创建关键字或标签。 图层文件夹和智能材质使用图层文件夹方便管理材质。 右键这个文件夹可以创建智能材质，创建智能材质会自动存储烘焙好的贴图，方便下次使用的时候自动设置。 同样的也可以创建智能遮罩。 图层覆盖上面图层覆盖下面图层的效果，比如Height 在第一个层中Height值为0，但是下面的图层中存在高度值，并仍然显示。 切换图层中的显示模式BaseColor为Height模式，可以看到默认的混合模式为线性添加，意味这所以图层高度值是叠加的。 如果要当前图层覆盖下面所有图层，将混合模式设置为normal标准 流程创建透明材质创建新shader并增加不透明度（opacity） PS：2020新版SP创建shader被放置在纹理设置里 设置Shader：pbr-metal-rough-with-alpha-blending 新建填充层，并设置透明度（右键视图窗口快捷调出属性面板） 烘焙贴图选择Texture set list里的base1打开纹理设置进行烘焙 教程中直接使用高模制作贴图，所以不用烘焙法线贴图和厚度贴图。在ID选项中把Color Source的Vertex Color改为Material Color。（新版默认是材质颜色）在高模选项中选择lantern_id,为了烘焙ID贴图，教程中弄了一个一样的模型，但是在模型的不同材质间赋予了不同颜色。 重新烘焙ID贴图烘焙的时候造成投射错误，会让后续使用ID贴图制作mask的时候存在错误。所以应该在烘焙的时候炸开（分离）模型。 在烘焙设置的Match选择中选择by mesh name，在下面的选项中更改高低模型对应的后缀，例如教程里的_id、_main。通过组名称来分离模型，SP在计算光线追踪的时候就会单独计算名字相匹配的模型。 创建基础材质颜色基础层选择Texture set list=>base1 新建图层base调节颜色 粗糙度层新建图层rough并添加黑色遮罩，关闭除rough以外的通道 在遮罩下添加Generator生成器dirt（根据之前烘焙的贴图程序化的生成污渍mask） 解决UV接缝，打开生成器里的Triplannar（三面投射）*后续使用到新的图层或填充也要开启三面投射* 在rough->mask下再新建一层并填充特效（图层-添加特效-添加填充）。在Grayscale添加Grunge Paint Scratch灰度图 改变Grunge Paint Scratch混合模式为Lighten（max） 实现效果： 油迹斑点层新建图层paint specks并添加黑色遮罩，关闭除height以外的通道，设置Height值为正数。 与rough类似，在mask上添加填充特效。 同样的为了避免UV接缝，打开三面投射。 在mask的填充中添加灰度图BnW Spots 1，适当调节参数 实现效果： 边缘暗淡新建图层，添加黑色遮罩，添加Mask Editor生成器，调节curvature曲率的参数 在mask上再添加新的填充特效。使用Grunge Rust Fine灰度图。并改变混合模式为Multip 实现效果：可以看到边缘有一些暗淡和无序的脏迹的效果。 再做一层变化复制上一层图层。更换新的填充特效。使用Grunge concrete old灰度图。调节层的颜色，复制多一层是为了使用不同的颜色，增加细微变化。 改变整个图层的混合模式为Overlay叠加，并降低透明度 实现效果： 第三层颜色变化添加黑色遮罩，添加填充特效，添加Light生成器。 添加一层填充特效，通过脏迹图来调节light生成器。添加Grunge concrete old灰度图，改变混合模式为Multiply 适当调节颜色，并更改图层混合模式为Value 添加生成器Dirt，借助生成器Dirt让高光颜色更集中。改变混合模式为Multiply 实现效果： 铁锈材质创建新图层base打开color，height，rough，ao通道。默认没有ao通道需要通过texture set设置面板里面添加。为各自通道添加导入的rust贴图。调节高度值 为材质创建遮罩创建图层文件夹，把上面的base图层放入其中。右键文件夹创建黑色遮罩层。 创建填充特效，选择Grunge 004作为灰度图 在这里我们不使用三面投射的方式，因为这个方式会出现一些映射模糊，直接使用UV投射。 创建填充特效，选择Grunge concrete old作为灰度图，设置三面映射。更改混合模式为Lighten（max） 创建Light生成器（分离铁锈积聚的地方）改变混合模式为Multiply，只在斜面上出现铁锈。 创建Dirt生成器，混合模式为Lighten（max） 创建Mask Editor生成器，主要为了把铁锈集中在边缘。 为Mask Editor增加第一张贴图：Grunge concrete old灰度图控制，并使用Multiply混合模式。 增加第二张贴图：Grunge scratch rough，并使用Lighten（max）混合模式，这张贴图主要增加划痕效果 最后把Mask Editor改为Lighten（max）混合模式 最后效果： 为铁锈颜色添加滤镜主要是更改铁锈颜色 智能材质的应用和图层链接智能材质可以直接拖拽到新的Texture set上，会自动设置对应烘焙好的贴图。更新其中一个Texture set的设置，另一个不会跟着变化。 图层链接 笔刷系统笔刷大小，笔刷流量，笔刷透明度，笔刷抖动，shelf中的笔刷预设，延迟笔刷，路径笔刷 保存笔刷预设：在绘画模式下属性面板中右键可以保存预设 tool工具预设会同时保存笔刷和材质 material材质预设只会保存材质 brush笔刷预设只会保存笔刷 绘画校准 分别是：镜头|wrap包裹|平面下的效果 在UV模式下不会画出uv边界，都适用于3d/2d窗口 Stencil模板：可以绘制图案。 纹理映射模式类似上面的stencil，不同在于有完整的材质属性，可以跨多个通道进行映射而不是一个灰色通道。 类似stencil的快捷键，同样使用s+鼠标键进行操作。使用的时候新建绘画图层，切换到映射模式，设置好需要映射的贴图即可开始绘制。 可以在显示设置里设置模板透明度。绘制的贴图颜色同样可以在层里面添加HSL滤镜进行调色 克隆工具特使的混合模式，要使用克隆工具要先新建绘画图层，并且把需要进行克隆的通道图层混合模式设置成passthrough穿过，例如basecolor，height，ao等通道信息都设置成passthrough穿过 克隆模式是非破坏性的，更改克隆图层下面的图层属性后，克隆的东西也会随着更新，就是passthrough模式的作用 克隆类似PS里面的印章。按住V键设置克隆源，就可以开始绘制。 锚定点系统文字细节更改笔刷的alpha贴图就可以印刷文字。 增加文字的AO，通过增加滤镜HBAO达到效果。 为文字增加铁锈影响使用锚定点。锚定点可以用来链接图层堆叠里的其中一个数据到另一个地方。 为我们上面的文字图层增加锚定点。右键->添加锚定点 打开rust->mg_dirt下面的MicroHeight选择anchor points指定刚刚文字图层里面的锚定点。设置引用通道为Height 然后进入微细节调节数值。 金属材质创建新的填充图层，使AO，高度信息覆盖下面图层。 设置金属值为1 添加Grunge rough dirty为Roughness贴图，设置三面映射。 使用色阶调整roughness贴图： 为图层增加levels特效，选择roughness通道作为受影响通道 边缘遮罩复制上述图层，并调整更亮的颜色，使用遮罩，让这个更亮的颜色集中在边缘位置。 添加黑色遮罩。添加Mask Editor生成器。 为Mask Editor添加纹理Grunge Dirt Scratched，记得把Texture值拉到1，不然会不起作用。 更改上述贴图的混合模式为Max（Lighen） 使用层文件管理金属材质的时候，别忘了要把文件夹的AO和高度信息覆盖下面图层。 使用ID贴图制作遮罩为metal rough这个材质文件夹添加颜色选择遮罩，这里就要使用到上面步骤中烘焙到的ID贴图。 选取ID颜色，指定金属部位。同时为了使金属部分也有铁锈，要把rust材质文件夹移动到最上层。 当初在制作rust材质的时候，没有使用金属通道，会导致铁锈部分看起来会太暗。 从金属通道可以看出来，metal rough占据了整个金属通道，而铁锈部分没有产生作用，这是不对的。我们把rust的金属通道打开，这时显示正确。 灯芯材质选择Texteure set->glass_enclosure 创建新的填充图层，类似的，我们使用层文件夹的形式创建遮罩。 这里我们使用新的遮罩方式。 为这个文件夹创建黑色遮罩，添加绘图特效。 使用几何填充工具。 在知道模型是分离的情况下可以使用模型填充，或者UV是分离的情况下也可以选择UV填充模式 把这个wick材质的AO，高度信息覆盖下面图层。 为这个base的高度通道，添加Fabric Alternate V贴图。并调整平铺值和UV比例值大小。 添加HBAO滤镜。 为这个base的basecolor通道添加Gradient Linear 1贴图 增加Gradient滤镜。调整灯芯的渐变颜色，适当的可以用使用paint特效，使用笔刷画，增加不规则感。 污垢材质使用同样的方法，选择Texture set-> base1 创建层文件夹，Height和AO通道下设置normal标准混合模式。 创建填充图层，并添加黑色遮罩。 添加dirt生成器 添加填充特效，添加grunge concrete old作为灰度图，设置三面映射，Multiply混合模式 污垢自上而下复制上面的图层，删除填充图层，改变生成器为Mask Editor 这次我们关闭curvature，打开position gradien方位渐变，调节参数，使得污垢自上而下。 为这个生成器添加grunge concrete old贴图，并设置Multiply混合模式，主要为了打散污垢。 调节方位渐变，使得污垢自上往下。 玻璃材质玻璃材质主要是制作Roughness贴图。通过叠加多张sp自带的程序化贴图来使粗糙度有更多的变化。 选择Texture -> glass1 添加新的填充图层命名为Glass关闭除Color，rough，opacity外的通道 填加新的填充图层，添加黑色遮罩 添加填充特效，加入Grunge rough dirty贴图。添加色阶特效 添加填充特效，加入Grunge stains small hollow贴图，Lighten（max）混合模式 添加填充特效，加入Grunge leaks贴图，Multiply混合模式 调整这些贴图的平衡到适合的值。 最后把Glass中的颜色值调接近白色 在渲染前先完善玻璃材质。为上面的玻璃添加之前创建好的dirt智能材质。 渲染进入玻璃的Texture set->glass1 打开顶部的Iray，进入着色器选项 把折射拖到1 进入显示设置可以调整背景，镜头，后处理等信息。 在上面的Iray设置中可以调整渲染时间，采样率等。 最终渲染效果： 导出贴图SP中有预设好的很多渲染器和引擎的贴图模板配置。当然也可以手动添加模板。","permalink":"https://ppuyan.github.io/2020/12/10/SP%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B%E7%AC%94%E8%AE%B0%EF%BC%9A%E7%85%A4%E6%B2%B9%E7%81%AF/","photos":[]},{"tags":[],"title":"Test","date":"2020/12/02","text":"TestTestTestTestTestTest‘test","permalink":"https://ppuyan.github.io/2020/12/02/Test/","photos":[]}],"categories":[],"tags":[{"name":"Substance Painter","slug":"Substance-Painter","permalink":"https://ppuyan.github.io/tags/Substance-Painter/"}]}